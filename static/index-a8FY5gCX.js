import I from"./index-JR7x71wp.js";import{d as w,r as i,e as x,o as B,a as c,c as l,q as b,h as L,b as R,F as V,g as C,i as E,L as j,_ as q}from"./index-BpbbEHLS.js";import{a as F}from"./index.vue_vue_type_style_index_0_scoped_62bc9b25_lang-BhVHhx4V.js";const M={class:"inner-wrapper"},N=["id"],Y=w({__name:"index",setup(A){const e=i(null),d=i(0),u=i(!0),n=x([]),h=i([]),g=t=>s=>{s&&(h.value[t]=s)};async function f(){await F().then(t=>{n.push(...t.feed_list)}).catch(()=>{n.push({videoSrc:"j (11).mp4",vid:1}),n.push({videoSrc:"j (12).mp4",vid:1}),n.push({videoSrc:"j (13).mp4",vid:1})})}const v=t=>{if(!e.value)return;const s=t.target;if(!e.value.contains(s))return;t.preventDefault(),d.value>=n.length-2&&f();const a=e.value.querySelectorAll(".inner");let o=0,m=1/0;a.forEach((S,y)=>{if(!e.value)return;const k=S.getBoundingClientRect(),_=Math.abs(k.top-e.value.getBoundingClientRect().top);_<m&&(o=y,m=_)});let r=o;t.deltaY>0&&r<a.length-1?r++:t.deltaY<0&&r>0&&r--;const p=e.value.querySelector("#inner_".concat(r));p&&(p.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}),d.value=r)};return B(async()=>{await f(),e.value&&e.value.addEventListener("wheel",v),u.value=!1}),(t,s)=>(c(),l("div",{class:"recommend-container",ref_key:"container",ref:e,onWheel:v},[u.value?(c(),b(j,{key:0,class:"loading"})):L("",!0),R("div",M,[(c(!0),l(V,null,C(n,(a,o)=>(c(),l("div",{class:"inner",key:o,id:"inner_"+o},[E(I,{modal:a,videoSrc:a.videoSrc,ref_for:!0,ref:g(o),vid:a.vid},null,8,["modal","videoSrc","vid"])],8,N))),128))])],544))}}),$=q(Y,[["__scopeId","data-v-12d53b87"]]);export{$ as default};
